---
// Componente de Servicios
---

<section id="servicios" class="py-20 gradient-bg scroll-component">
  <div class="max-w-7xl mx-auto px-6">
    <div class="text-center mb-14 fade-in scroll-component">
      <h2 class="text-3xl md:text-5xl font-serif font-bold">Nuestros <span class="text-orbe-violet">Servicios</span></h2>
    </div>

    <div class="grid md:grid-cols-3 gap-10">
      <!-- 1 -->
      <article 
        class="fade-in-left card-gradient rounded-2xl p-8 hover:ring-2 hover:ring-orbe-violet/60 hover:shadow-xl hover:shadow-orbe-violet/20 transition-all duration-300 cursor-pointer hover-lift service-card group" 
        data-service="bi-ba"
      >
        <div class="w-12 h-12 rounded-lg bg-orbe-violet/20 group-hover:bg-orbe-violet/30 group-hover:scale-110 transition-all duration-300 grid place-items-center mb-5">
          <svg class="w-6 h-6 text-orbe-violet group-hover:text-white transition-colors duration-300" viewBox="0 0 24 24" fill="none"><path d="M4 20h4V10H4v10Zm6 0h4V6h-4v14Zm6 0h4V3h-4v17Z" stroke="currentColor" stroke-width="2"/></svg>
        </div>
        <h3 class="text-2xl font-serif font-semibold text-soft-white">BI/BA</h3>
        <p class="mt-3 text-muted">Transformamos datos en insights accionables mediante dashboards interactivos y análisis avanzados. Facilitamos la toma de decisiones estratégicas con visualizaciones claras y métricas clave del negocio.</p>
        
        <!-- Card expandida para mobile - aparece solo en mobile -->
        <div id="service-detail-card-bi-ba" class="md:hidden mt-6 opacity-0 transform translate-y-8 pointer-events-none transition-all duration-600 ease-out max-h-0 overflow-hidden">
          <article class="card-gradient rounded-2xl p-6 border border-orbe-violet/30">
            <div class="flex items-start gap-4">
              <div class="w-12 h-12 rounded-xl bg-orbe-violet/20 grid place-items-center flex-shrink-0">
                <svg class="w-6 h-6 text-orbe-violet" viewBox="0 0 24 24" fill="none"><path d="M4 20h4V10H4v10Zm6 0h4V6h-4v14Zm6 0h4V3h-4v17Z" stroke="currentColor" stroke-width="2"/></svg>
              </div>
              <div class="flex-1">
                <h3 class="text-xl font-serif font-bold text-soft-white mb-3">BI/BA</h3>
                <p class="text-sm text-muted mb-4">Transformamos datos en insights accionables mediante dashboards interactivos y análisis avanzados.</p>
                
                <div class="space-y-4">
                  <div>
                    <h4 class="text-sm font-semibold text-orbe-violet mb-2">Ventajas</h4>
                    <ul class="space-y-2">
                      <li class="flex items-start gap-2 text-xs text-muted">
                        <svg class="w-4 h-4 text-orbe-violet mt-0.5 flex-shrink-0" viewBox="0 0 24 24" fill="none">
                          <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>Mejor toma de decisiones</span>
                      </li>
                      <li class="flex items-start gap-2 text-xs text-muted">
                        <svg class="w-4 h-4 text-orbe-violet mt-0.5 flex-shrink-0" viewBox="0 0 24 24" fill="none">
                          <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>Dashboards interactivos</span>
                      </li>
                      <li class="flex items-start gap-2 text-xs text-muted">
                        <svg class="w-4 h-4 text-orbe-violet mt-0.5 flex-shrink-0" viewBox="0 0 24 24" fill="none">
                          <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>Insights accionables</span>
                      </li>
                    </ul>
                  </div>
                  
                  <div>
                    <h4 class="text-sm font-semibold text-orbe-violet mb-2">Tecnologías</h4>
                    <div class="flex flex-wrap gap-1">
                      <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orbe-violet/10 text-orbe-violet border border-orbe-violet/20">Power BI</span>
                      <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orbe-violet/10 text-orbe-violet border border-orbe-violet/20">Tableau</span>
                      <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orbe-violet/10 text-orbe-violet border border-orbe-violet/20">Python</span>
                      <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orbe-violet/10 text-orbe-violet border border-orbe-violet/20">SQL</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </article>
        </div>
      </article>

      <!-- 2 -->
      <article 
        class="fade-in card-gradient rounded-2xl p-8 hover:ring-2 hover:ring-orbe-violet/60 hover:shadow-xl hover:shadow-orbe-violet/20 transition-all duration-300 cursor-pointer hover-lift service-card group" 
        data-service="desarrollo-software"
      >
        <div class="w-12 h-12 rounded-lg bg-orbe-violet/20 group-hover:bg-orbe-violet/30 group-hover:scale-110 transition-all duration-300 grid place-items-center mb-5">
          <svg class="w-6 h-6 text-orbe-violet group-hover:text-white transition-colors duration-300" viewBox="0 0 24 24" fill="none"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z" stroke="currentColor" stroke-width="2"/></svg>
        </div>
        <h3 class="text-2xl font-serif font-semibold text-soft-white">Desarrollo de Software y Automatizaciones</h3>
        <p class="mt-3 text-muted">Creamos soluciones a medida que se integran perfectamente con tus sistemas existentes. Automatizamos procesos repetitivos para aumentar la eficiencia y reducir errores operativos.</p>
        
        <!-- Card expandida para mobile - aparece solo en mobile -->
        <div id="service-detail-card-desarrollo-software" class="md:hidden mt-6 opacity-0 transform translate-y-8 pointer-events-none transition-all duration-600 ease-out max-h-0 overflow-hidden">
          <article class="card-gradient rounded-2xl p-6 border border-orbe-violet/30">
            <div class="flex items-start gap-4">
              <div class="w-12 h-12 rounded-xl bg-orbe-violet/20 grid place-items-center flex-shrink-0">
                <svg class="w-6 h-6 text-orbe-violet" viewBox="0 0 24 24" fill="none"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z" stroke="currentColor" stroke-width="2"/></svg>
              </div>
              <div class="flex-1">
                <h3 class="text-xl font-serif font-bold text-soft-white mb-3">Desarrollo de Software y Automatizaciones</h3>
                <p class="text-sm text-muted mb-4">Creamos soluciones a medida que se integran perfectamente con tus sistemas existentes.</p>
                
                <div class="space-y-4">
                  <div>
                    <h4 class="text-sm font-semibold text-orbe-violet mb-2">Ventajas</h4>
                    <ul class="space-y-2">
                      <li class="flex items-start gap-2 text-xs text-muted">
                        <svg class="w-4 h-4 text-orbe-violet mt-0.5 flex-shrink-0" viewBox="0 0 24 24" fill="none">
                          <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>Soluciones a medida</span>
                      </li>
                      <li class="flex items-start gap-2 text-xs text-muted">
                        <svg class="w-4 h-4 text-orbe-violet mt-0.5 flex-shrink-0" viewBox="0 0 24 24" fill="none">
                          <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>Integración con APIs</span>
                      </li>
                      <li class="flex items-start gap-2 text-xs text-muted">
                        <svg class="w-4 h-4 text-orbe-violet mt-0.5 flex-shrink-0" viewBox="0 0 24 24" fill="none">
                          <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>Reducción de tareas repetitivas</span>
                      </li>
                    </ul>
                  </div>
                  
                  <div>
                    <h4 class="text-sm font-semibold text-orbe-violet mb-2">Tecnologías</h4>
                    <div class="flex flex-wrap gap-1">
                      <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orbe-violet/10 text-orbe-violet border border-orbe-violet/20">.NET</span>
                      <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orbe-violet/10 text-orbe-violet border border-orbe-violet/20">React</span>
                      <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orbe-violet/10 text-orbe-violet border border-orbe-violet/20">Node.js</span>
                      <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orbe-violet/10 text-orbe-violet border border-orbe-violet/20">Python</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </article>
        </div>
      </article>

      <!-- 3 -->
      <article 
        class="fade-in-right card-gradient rounded-2xl p-8 hover:ring-2 hover:ring-orbe-violet/60 hover:shadow-xl hover:shadow-orbe-violet/20 transition-all duration-300 cursor-pointer hover-lift service-card group" 
        data-service="ciberseguridad"
      >
        <div class="w-12 h-12 rounded-lg bg-orbe-violet/20 group-hover:bg-orbe-violet/30 group-hover:scale-110 transition-all duration-300 grid place-items-center mb-5">
          <svg class="w-6 h-6 text-orbe-violet group-hover:text-white transition-colors duration-300" viewBox="0 0 24 24" fill="none"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" stroke="currentColor" stroke-width="2"/></svg>
        </div>
        <h3 class="text-2xl font-serif font-semibold text-soft-white">Ciberseguridad</h3>
        <p class="mt-3 text-muted">Protegemos tu información y sistemas con estrategias integrales de seguridad. Implementamos controles avanzados y monitoreo continuo para garantizar el cumplimiento normativo y la protección de datos.</p>
        
        <!-- Card expandida para mobile - aparece solo en mobile -->
        <div id="service-detail-card-ciberseguridad" class="md:hidden mt-6 opacity-0 transform translate-y-8 pointer-events-none transition-all duration-600 ease-out max-h-0 overflow-hidden">
          <article class="card-gradient rounded-2xl p-6 border border-orbe-violet/30">
            <div class="flex items-start gap-4">
              <div class="w-12 h-12 rounded-xl bg-orbe-violet/20 grid place-items-center flex-shrink-0">
                <svg class="w-6 h-6 text-orbe-violet" viewBox="0 0 24 24" fill="none"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" stroke="currentColor" stroke-width="2"/></svg>
              </div>
              <div class="flex-1">
                <h3 class="text-xl font-serif font-bold text-soft-white mb-3">Ciberseguridad</h3>
                <p class="text-sm text-muted mb-4">Protegemos tu información y sistemas con estrategias integrales de seguridad.</p>
                
                <div class="space-y-4">
                  <div>
                    <h4 class="text-sm font-semibold text-orbe-violet mb-2">Ventajas</h4>
                    <ul class="space-y-2">
                      <li class="flex items-start gap-2 text-xs text-muted">
                        <svg class="w-4 h-4 text-orbe-violet mt-0.5 flex-shrink-0" viewBox="0 0 24 24" fill="none">
                          <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>Protección de datos</span>
                      </li>
                      <li class="flex items-start gap-2 text-xs text-muted">
                        <svg class="w-4 h-4 text-orbe-violet mt-0.5 flex-shrink-0" viewBox="0 0 24 24" fill="none">
                          <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>Gestión de riesgos</span>
                      </li>
                      <li class="flex items-start gap-2 text-xs text-muted">
                        <svg class="w-4 h-4 text-orbe-violet mt-0.5 flex-shrink-0" viewBox="0 0 24 24" fill="none">
                          <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>Cumplimiento normativo</span>
                      </li>
                    </ul>
                  </div>
                  
                  <div>
                    <h4 class="text-sm font-semibold text-orbe-violet mb-2">Tecnologías</h4>
                    <div class="flex flex-wrap gap-1">
                      <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orbe-violet/10 text-orbe-violet border border-orbe-violet/20">Firewall</span>
                      <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orbe-violet/10 text-orbe-violet border border-orbe-violet/20">SIEM</span>
                      <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orbe-violet/10 text-orbe-violet border border-orbe-violet/20">Pen Testing</span>
                      <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orbe-violet/10 text-orbe-violet border border-orbe-violet/20">MFA</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </article>
        </div>
      </article>
    </div>

    <!-- Card explicativa expandida para desktop -->
    <div id="service-detail-card" class="hidden md:block mt-10 opacity-0 transform translate-y-8 pointer-events-none transition-all duration-600 ease-out max-h-0 overflow-hidden">
      <article class="card-gradient rounded-2xl p-8 border border-orbe-violet/30">
        <div class="flex items-start gap-6">
          <div id="service-icon" class="w-16 h-16 rounded-xl bg-orbe-violet/20 grid place-items-center flex-shrink-0">
            <!-- Icono se inserta dinámicamente -->
          </div>
          <div class="flex-1">
            <h3 id="service-title" class="text-3xl font-serif font-bold text-soft-white mb-4">
              <!-- Título se inserta dinámicamente -->
            </h3>
            <p id="service-overview" class="text-lg text-muted mb-6">
              <!-- Descripción se inserta dinámicamente -->
            </p>
            
            <div class="grid md:grid-cols-2 gap-8">
              <div>
                <h4 class="text-xl font-semibold text-orbe-violet mb-4">Ventajas</h4>
                <ul id="service-benefits" class="space-y-3">
                  <!-- Ventajas se insertan dinámicamente -->
                </ul>
              </div>
              
              <div>
                <h4 class="text-xl font-semibold text-orbe-violet mb-4">Tecnologías</h4>
                <div id="service-technologies" class="flex flex-wrap gap-2">
                  <!-- Tecnologías se insertan como badges -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </article>
    </div>
  </div>
</section>

<script>
  // Datos de servicios detallados
  const servicesData = {
    'bi-ba': {
      title: 'BI/BA',
      overview: 'Transformamos datos en insights accionables mediante dashboards interactivos y análisis avanzados. Facilitamos la toma de decisiones estratégicas con visualizaciones claras y métricas clave del negocio.',
      icon: 'M4 20h4V10H4v10Zm6 0h4V6h-4v14Zm6 0h4V3h-4v17Z',
      benefits: [
        'Mejor toma de decisiones',
        'Dashboards interactivos',
        'Insights accionables'
      ],
      technologies: [
        'Power BI',
        'Tableau',
        'Looker',
        'Python',
        'SQL'
      ]
    },
    'desarrollo-software': {
      title: 'Desarrollo de Software y Automatizaciones',
      overview: 'Creamos soluciones a medida que se integran perfectamente con tus sistemas existentes. Automatizamos procesos repetitivos para aumentar la eficiencia y reducir errores operativos.',
      icon: 'M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z',
      benefits: [
        'Soluciones a medida',
        'Integración con APIs',
        'Reducción de tareas repetitivas'
      ],
      technologies: [
        '.NET',
        'React',
        'Node.js',
        'Python',
        'Zapier',
        'n8n'
      ]
    },
    'ciberseguridad': {
      title: 'Ciberseguridad',
      overview: 'Protegemos tu información y sistemas con estrategias integrales de seguridad. Implementamos controles avanzados y monitoreo continuo para garantizar el cumplimiento normativo y la protección de datos.',
      icon: 'M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z',
      benefits: [
        'Protección de datos',
        'Gestión de riesgos',
        'Cumplimiento normativo'
      ],
      technologies: [
        'Firewall',
        'SIEM',
        'Pen Testing',
        'Cloud Security',
        'MFA'
      ]
    }
  };

  // Estado actual del servicio activo
  let activeService = null;

  // Función para mostrar la card detallada
  function showServiceDetail(serviceId) {
    const serviceData = servicesData[serviceId];
    if (!serviceData) return;

    // Detectar si estamos en mobile o desktop
    const isMobile = window.innerWidth < 768; // md breakpoint
    
    if (isMobile) {
      // En mobile, mostrar la card específica del servicio
      const mobileDetailCard = document.getElementById(`service-detail-card-${serviceId}`);
      if (mobileDetailCard) {
        // Ocultar todas las otras cards móviles primero
        hideAllMobileServiceDetails();
        
        // Mostrar la card específica
        mobileDetailCard.style.transform = 'translateY(-20px)';
        mobileDetailCard.style.opacity = '0';
        mobileDetailCard.style.pointerEvents = 'none';
        mobileDetailCard.style.maxHeight = '0';
        
        // Forzar reflow
        mobileDetailCard.offsetHeight;
        
        // Aplicar animación
        mobileDetailCard.style.transform = 'translateY(0)';
        mobileDetailCard.style.opacity = '1';
        mobileDetailCard.style.pointerEvents = 'auto';
        mobileDetailCard.style.maxHeight = '1000px';
      }
    } else {
      // En desktop, usar la card original
      const detailCard = document.getElementById('service-detail-card');
      const serviceIcon = document.getElementById('service-icon');
      const serviceTitle = document.getElementById('service-title');
      const serviceOverview = document.getElementById('service-overview');
      const serviceBenefits = document.getElementById('service-benefits');
      const serviceTechnologies = document.getElementById('service-technologies');

      if (!detailCard || !serviceIcon || !serviceTitle || !serviceOverview || !serviceBenefits || !serviceTechnologies) {
        return;
      }

      // Actualizar contenido
      serviceIcon.innerHTML = `<svg class="w-8 h-8 text-orbe-violet" viewBox="0 0 24 24" fill="none"><path d="${serviceData.icon}" stroke="currentColor" stroke-width="2"/></svg>`;
      serviceTitle.textContent = serviceData.title;
      serviceOverview.textContent = serviceData.overview;

      // Limpiar contenido
      serviceBenefits.innerHTML = '';
      serviceTechnologies.innerHTML = '';

      // Llenar ventajas como lista
      serviceData.benefits.forEach(benefit => {
        const li = document.createElement('li');
        li.className = 'flex items-start gap-3 text-muted';
        li.innerHTML = `
          <svg class="w-5 h-5 text-orbe-violet mt-0.5 flex-shrink-0" viewBox="0 0 24 24" fill="none">
            <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span>${benefit}</span>
        `;
        serviceBenefits.appendChild(li);
      });

      // Llenar tecnologías como badges
      serviceData.technologies.forEach(tech => {
        const badge = document.createElement('span');
        badge.className = 'inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-orbe-violet/10 text-orbe-violet border border-orbe-violet/20 hover:bg-orbe-violet/20 transition-colors duration-200';
        badge.textContent = tech;
        serviceTechnologies.appendChild(badge);
      });

      // Mostrar con animación fade in down (desde arriba)
      detailCard.style.transform = 'translateY(-20px)';
      detailCard.style.opacity = '0';
      detailCard.style.pointerEvents = 'none';
      detailCard.style.maxHeight = '0';
      
      // Forzar reflow
      detailCard.offsetHeight;
      
      // Aplicar animación
      detailCard.style.transform = 'translateY(0)';
      detailCard.style.opacity = '1';
      detailCard.style.pointerEvents = 'auto';
      detailCard.style.maxHeight = '1000px'; // Altura suficiente para el contenido
    }
  }

  // Función para ocultar todas las cards móviles
  function hideAllMobileServiceDetails() {
    const mobileCards = ['bi-ba', 'desarrollo-software', 'ciberseguridad'];
    mobileCards.forEach(serviceId => {
      const mobileCard = document.getElementById(`service-detail-card-${serviceId}`);
      if (mobileCard) {
        mobileCard.style.transform = 'translateY(-20px)';
        mobileCard.style.opacity = '0';
        mobileCard.style.pointerEvents = 'none';
        mobileCard.style.maxHeight = '0';
      }
    });
  }

  // Función para ocultar la card detallada
  function hideServiceDetail() {
    const isMobile = window.innerWidth < 768;
    
    if (isMobile) {
      hideAllMobileServiceDetails();
    } else {
      const detailCard = document.getElementById('service-detail-card');
      
      if (!detailCard) return;
      
      // Aplicar animación fade out up (hacia arriba)
      detailCard.style.transform = 'translateY(-20px)';
      detailCard.style.opacity = '0';
      detailCard.style.pointerEvents = 'none';
      detailCard.style.maxHeight = '0';
    }
  }

  // Función para manejar el click en las cards
  function handleServiceClick(serviceId) {
    const serviceCards = document.querySelectorAll('.service-card');
    
    // Remover clase activa de todas las cards
    serviceCards.forEach(card => {
      card.classList.remove('ring-2', 'ring-orbe-violet', 'shadow-lg', 'shadow-orbe-violet/25', 'bg-gradient-to-br', 'from-orbe-violet/10', 'to-purple-600/10');
    });

    if (activeService === serviceId) {
      // Si es la misma card, desactivar
      activeService = null;
      hideServiceDetail();
    } else {
      // Activar nueva card
      activeService = serviceId;
      const clickedCard = document.querySelector(`[data-service="${serviceId}"]`);
      if (clickedCard) {
        clickedCard.classList.add('ring-2', 'ring-orbe-violet', 'shadow-lg', 'shadow-orbe-violet/25', 'bg-gradient-to-br', 'from-orbe-violet/10', 'to-purple-600/10');
      }
      showServiceDetail(serviceId);
    }
  }

  // Agregar event listeners cuando el DOM esté listo
  document.addEventListener('DOMContentLoaded', () => {
    const serviceCards = document.querySelectorAll('.service-card');
    
    serviceCards.forEach(card => {
      card.addEventListener('click', () => {
        const serviceId = card.getAttribute('data-service');
        handleServiceClick(serviceId);
      });
    });
  });
</script>
